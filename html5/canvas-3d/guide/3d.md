## 前情提要

* webgl系统的工作原理
* 着色器的作用
* 矩阵变换（平移，旋转，缩放）
* 动画和纹理映射

## 内容

* 以用户视角而进入三维世界
* 控制三维可视空间
* 裁剪
* 处理物体的前后关系
* 绘制三维的立方体

## 定义三维世界的观察者

* 在什么地方
* 朝哪里看
* 视野有多宽
* 能看多远
* 我们最后还是把三维场景绘制到二维屏幕上，即绘制观察者看到的世界，而观察者可以放在任意位置观察 *

 `为了定义观察者，你需要考虑以下两个点：`
1. 观察方向，即观察者自己在什么位置，在看场景的哪一部分；
2. 可视距离，即观察者能看多远

观察者所处位置： 视点
从视点触发沿着观察方向的射线称作： 视线

## 视点，观察目标点，上方向

* 确定观察者的状态，需要的信息： 
  + 视点：观察者的 `位置`  `(eyeX,eyeY,eyeZ)`
  + 观察目标点：被观察目标所在的点，它可以用来确定 `视线`  `(atX,atY,atZ)`
  + 我们要把观察到的景象绘制到屏幕上，还好知道 `上方向`  `(upX,upY,upZ)`
* 使用上面三个矢量创建 `视图矩阵` ，将矩阵传给 `顶点着色器`
* `根据自定义的观察者状态，绘制观察者看到的景象` 与 `使用默认的观察状态，但是对三维对象进行平移，旋转，等变换，再绘制观察者看到的景象` 两种行为 `等价`
* 想旋转图形，就需要旋转矩阵乘以旋转前的顶点坐标； `<旋转后顶点坐标> = <旋转矩阵> * <原始顶点坐标>`
* 视图矩阵乘以旋转后的顶点坐标，就可以获取， `从视点看上去` 的旋转后的顶点坐标； `<从视点看上去的 旋转后顶点坐标> = <视图矩阵> * <旋转后的顶点坐标>`
* webgl只显示可视范围内的区域


## 可视范围（正射类型
* 不绘制可视范围外的对象，是基本的降低程序开销的手段；
* 绘制可视范围外的对象没有意义，即使把它们绘制出来也不会在屏幕上显示；
* 从某中程序上来说，这样也模拟了人类观察物体的方式；
* 人类水平视角大约200度左右；webgl就是类似的方式；

## 可视空间
* 长方体可视空间，也称盒状空间，由`正射投影`产生；
* 四棱锥/金字塔可视空间，由`透视投影`产生；

### 透视投影
* 三维场景看上去更是有深度感，更加自然，因为我们平时观察真实世界用的也是透视投影；

### 正射投影
* 可以方便的比较场景中的物体（比如两个原子的模型）的大小，这是因为物体看上去的大小与其所在位置没有关系；
* 在建筑平面图等技术绘图的相关场合使用；