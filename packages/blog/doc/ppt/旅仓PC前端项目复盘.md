# 旅仓 PC 前端架构设计与实现

## 自我介绍

| 姓名     | 季明壮                                                                                                                       |
| -------- | ---------------------------------------------------------------------------------------------------------------------------- |
| 基准岗位 | 前端开发                                                                                                                     |
| 职级     | T5                                                                                                                           |
| 核心工作 | 旅仓分销平台前端相关系统的架构设计与实现，以及日常开发与维护。其中包括旅仓 PC 站，旅仓 M 站，旅仓小程序，旅仓 CRM 管理系统等 |

## 旅仓 PC 前端架构设计与实现复盘

### 背景

**旅仓**是同程旅游授权的全品类的分销网站，包括：旅游线路，酒店，机票，等等产品和服务。

但是旅仓技术方案目前面临几个问题对我们的开发与迭代造成了巨大的负担（）：

1. 采用的是`aps.net mvc`的技术架构，前端只是`mvc`中的`v`，前后端耦合严重。
2. 当前的前端技术栈老旧，技术栈采用的是基于`jQuery+plugins`的方案，写复杂逻辑很痛苦。
3. 逻辑复杂且混乱，代码组织结构不清晰，导致维护成本较高，再发展下去肯定会慢慢变的不可维护了。

所以进行技术架构，技术栈升级。而且为了不影响业务日常工作开展，我们进行了渐进式的项目演进。

### 目标

1. 架构升级，提高开发人员的开发效率与开发体验。
2. 老项目重构，提高项目的可维护性和可拓展性等。
3. 不影响业务日常工作开展的前提下给业务交付开发结果。

### 技术方案

#### 第一阶段

1. 开发时进行前后端分离

   1.1 前后端分离

   > 首先进行前后端分离，让前端拿回前端项目的主动权，独立设计，独立开发（面向`业务`与`HTTP API`）。

   1.2 前端项目架构设计

   > 12

2. 构建时产物进老项目

   2.1 兼容老项目。

   2.2 避免技术债务。

   2.3 开发效率，尽快满足业务需求。

3. 运行时利用老服务器渲染

#### 第二阶段 _（未来计划）_

项目完全不再依赖后端服务器`特指的是传统后端服务器，asp.net,java`，可独立部署，这个阶段会结合`微前端`、`ssr`、`monorepore`做更多架构创新探索。

### 总结

#### 优点

1. 架构升级，提高开发人员的开发效率与开发体验，更好的做到业务开发的交付。
2. 从技术角度来看，我们在尽量对齐业界最新技术实践，保持开发人员的核心竞争力。
3. 从项目角度来看，我们在尽量保持的项目可持续发展（可维护性，可拓展性，可复用性，健壮性等等），与时俱进。

#### 缺点以及展望

1. 项目的监控（埋点，异常，性能）缺失，促使我们对问题后知后觉，后续进一步补齐这一块的短板，接入公司的监控平台中去。
2. 旅仓`web`网站的应用形态，最终技术方案应该时`ssr`，这样可以给我们后续的优化，新的技术方案的采用等等带来便利。
