## 概述

* opengl1.1使用固定功能管线；
* opengl2.0使用可编程管线；
* webgl只能，必须使用可编程管线；
* webgl2.0在2017.1发布；

## webgl图形上下文

## 着色器程序

## 管线中的数据流

webgl图形管线渲染一张图片。定义图片的数据来自javascript。 当数据被传递到管线中时，她被当前的顶点着色器和片元着色器以及管线的固定功能阶段来处理。你需要理解数据是如何被javascript放进管线的以及当它被传递到管线中时，数据是如何被处理的。

在webgl中的基础操作是画一个几何元件；webgl只使用在子章节3.1.1中引入的opengl元件中的七个，画四边形和多边形的元件被移除；剩余的是画点，线段，三角形的元件。在webgl中，通过在webgl图形上下文gl上的， `gl.POINTS`，`gl.LINES`, `gl.LINE_STRIP`，`gl.LINE_LOOP`，`gl.TRIANGLES`，`gl.TRIANGLES_STRIP`，和`gl. TRIANGLES_FAN`常数，来识别元件的七种类型。

当webgl被用于画一个元件时，有两个提供给元件数据的一般类目。两中数据是指`attribute variables`和`uniform variables`。一个元件通过它的类型和顶点列表来定义。`attribute`和`uniform`之间的不同是，uniform变量有一个单一的值，整个元件都是相同的，然而attribute变量的值，不同顶点都是不同的。

总是被指定的一个attribute是，顶点的坐标。顶点坐标系必须是一个attribute，因为元件中的每个顶点都有自己坐标设置。另一个可能的attribute是颜色。我们已经看到，opengl允许你给元件的每一个顶点指定不同的颜色。在webgl中，你可以做一样的事情，并且在那个案例中，颜色成为一个attribute.另一方面，你想要整个元件都一样，uniform颜色；在那个案例中，颜色成为一个uniform变量。其他能够即是attribute又是uniform的工程量，取决你的需要，包括法线向量，素材属性，纹理坐标，如果它们被使用，尽可能包含在一个attribute中，因为在一个元件中所有的顶点有相同的纹理坐标是真的没有意义的。如果一个几何变换被应用到元件上，他将会自然的表示为一个uniform变量。

但是，重要的是理解，webgl不能结合任何预定义的attribute,甚至连一个顶点坐标系都没有，在可编程管线中，被使用的attribute和uniforms整个都是程序员的责任。目前webgl被关注，attributes只是传递到顶点着色器中的值。uniforms能够被传递到顶点着色器和片元着色器，webgl不为这些值赋值。意义由整个着色器处理的值来决定，当画元件时，被使用在绘制的元件中的attributes和uniforms集合由使用中的着色器的源码来决定的。

要理解这个，我们需要看一看在管线中发生的更多详情。当画一个元件的时候，javascript程序会给在着色器程序中的任何attributes和uniforms指定值。对于每个attributes，它会给每个顶点指定值数组。每个uniforms，它会指定一个单一的值。元件被画之前，值将会被发送到gpu中。当绘制元件时，gpu会给每个顶点调用一次顶点着色器器。被处理的顶点attribues值作为输入被传递到顶点着色器。uniform变量的值也会被传递到顶点着色器。在着色器中，attributes和uniforms都代表全局变量，着色器被调用之前，他的值被设置好。

作为着色器的输入之一，在裁剪坐标系系统中，顶点着色器必须指定顶点的坐标。通过赋值给命名为`gl.Position`的指定变量。位置通常是代表对象坐标系系统中的坐标的属性被应用变换来计算的。但是事实上，位置怎么被计算，是程序员的责任。

在元件中的所有顶点的位置被计算之后，在管线中的一个固定功能阶段会裁剪掉元件超过有效裁剪坐标范围部分的坐标。-1到1，沿着每一个坐标轴

## Uniform变量的值

## Attributes的值

## 画原始原件
