## 概述

* 使用webgl渲染三维图形，然后将渲染结果作为纹理贴到另一个三维物体上；

## 帧缓冲区对象和渲染缓冲区对象

* 默认webgl在颜色缓冲区进行绘图，在开启隐藏面消除功能时，还会用到深度缓冲区；
* 总之，绘制的结果图像是存储在`颜色缓冲区`中的；

* 颜色缓冲区：

* 帧缓冲区对象（framebuffer object）：
  - 可以用来代替颜色缓冲区或者深度缓冲区；
  - 绘制到帧缓冲区的对象，不会直接显示在canvas中；
  - 在帧缓冲区中进行绘制的过程，叫做`离屏绘制`；
  - 帧缓冲区所关联的对象：
    - 颜色关联对象；
    - 深度关联对象；
    - 模板关联对象；
    - `分别用来替代：颜色缓冲区，深度缓冲区，模板缓冲区`

* 使用`webgl渲染出的图像`作为`纹理`使用，需要将`纹理对象`作为`颜色关联对象`关联到`帧缓冲区对象`上；
* 在帧缓冲区中进行绘制，纹理对象就这样代替了颜色缓冲区；
* 这时仍然需要进行隐藏面消除，所以需要创建一个`渲染缓冲区对象`来作为`帧缓冲区`的`深度关联对象`，替代深度缓冲区；

`WebGLRenderbuffer`: 保存一个图像的缓存并且可以用于渲染操作的源或者目标；

1. gl.createFramebuffer()/gl.deleteFramebuffer()：创建/删除帧缓冲区；
2. gl.createTexture(), gl.bindTexture(), gl.texImage2D(), gl.Parameteri()：创建纹理对象并设置其尺寸和参数；
3. gl.createRenderbuffer()：创建渲染缓冲区对象；
4. gl.bindRenderbuffer(),gl.renderbufferStorage()：绑定渲染缓冲区对象并设置其尺寸；
5. gl.framebufferTexture2D()：将`帧缓冲区的颜色关联对象`指定为一个`纹理对象`；
6. gl.framebufferRenderbuffer()：将`帧缓冲区的深度关联对象`，指定为一个`渲染缓冲区对象`；
7. gl.checkFramebufferStatus(): 检查帧缓冲区是否配置正确；
8. gl.bindFramebuffer()：把绘制目标切换为帧缓冲区对象；